<Page x:ConnectionId='1'
    x:Class="GMTool.GMCommandTool"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:GMTool"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" NavigationCacheMode="Required">

  <Grid x:ConnectionId='2' x:Name="Root">
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="300"/>
      <ColumnDefinition Width="*"/>
    </Grid.ColumnDefinitions>

      <!--<TextBlock Text="GM 命令" Margin="20,20,0,0" Style="{StaticResource TitleTextBlockStyle}" FontWeight="Bold"></TextBlock>-->

      <Grid Grid.Column="0" Grid.ColumnSpan="2" Margin="20" VerticalAlignment="Top">
      <InfoBar x:ConnectionId='27' x:Name="TopInfoBar" Title="未选择服务器" Message="请选择服务器。" Height="50" IsIconVisible="True" Severity="Warning" IsClosable="False" IsOpen="True">
          <InfoBar.ContentTemplate>
              <DataTemplate>
                  <TextBlock TextWrapping="NoWrap" TextTrimming="WordEllipsis"></TextBlock>
              </DataTemplate>
          </InfoBar.ContentTemplate>
      </InfoBar>
    </Grid>

    <Grid Grid.Column="0" Margin="10,80,10,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="56"/>
        <RowDefinition Height="72"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>
      <Grid Grid.Row="0">
        <TextBlock Text="服务器" Style="{StaticResource SubtitleTextBlockStyle}" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,10"/>
        <Button x:ConnectionId='26' x:Name="BtnResetServer" ToolTipService.ToolTip="重置服务器" HorizontalAlignment="Right"                              Visibility="Collapsed" Margin="10,0"></Button>
        <NavigationViewItemSeparator Margin="10,0" VerticalAlignment="Bottom"></NavigationViewItemSeparator>
      </Grid>
        <Grid Grid.Row="1" Margin="10,10,10,0" HorizontalAlignment="Stretch">
            <ComboBox x:ConnectionId='24' x:Name="cbEnvSelect" HorizontalAlignment="Stretch" Text="ONE PreRelease" Header="大区和环境">
              <ComboBox.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=DisplayName}"></TextBlock>
                </DataTemplate>
                </ComboBox.ItemTemplate>
            </ComboBox>
        </Grid>
      <ListView x:ConnectionId='21' Grid.Row="2" x:Name="ServersListView" Margin="10,10" CornerRadius="6" Padding="0,2" SelectionMode="Extended" BorderThickness="1" BorderBrush="{ThemeResource SystemControlBackgroundBaseLowBrush}"                                                      >
        <ListView.ItemTemplate>
          <DataTemplate>
            <TextBlock Text="{Binding Path=DisplayName}">
              <TextBlock.ContextFlyout>
                <MenuFlyout>
                  <MenuFlyoutItem x:ConnectionId='23' Text="全选" Command="{Binding}" CommandParameter="{Binding}"                                        >
                    <MenuFlyoutItem.Icon>
                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe9d5;"/>
                    </MenuFlyoutItem.Icon>
                  </MenuFlyoutItem>
                </MenuFlyout>
              </TextBlock.ContextFlyout>
            </TextBlock>
          </DataTemplate>
        </ListView.ItemTemplate>
      </ListView>
    </Grid>

    <Grid Grid.Column="1" Margin="10,80,10,10">
      <Grid.RowDefinitions>
        <RowDefinition Height="56"/>
        <RowDefinition Height="80"/>
        <RowDefinition Height="80"/>
        <RowDefinition Height="80"/>
        <RowDefinition Height="56"/>
        <RowDefinition Height="*"/>
      </Grid.RowDefinitions>

      <Grid Grid.Row="0">
        <TextBlock Text="命令列表" Style="{StaticResource SubtitleTextBlockStyle}" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,10"/>
        <SplitButton x:ConnectionId='14' x:Name="BtnResetPlayer" Content="无角色" Margin="10,0" HorizontalAlignment="Right" Visibility="Visible" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"                        >
          <SplitButton.Flyout>
            <MenuFlyout Placement="RightEdgeAlignedBottom">
              <ToggleMenuFlyoutItem x:ConnectionId='17' Text="自动填入角色 ID"                                           FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" IsChecked="True"                          >
                  <MenuFlyoutItem.Icon>
                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xec87;"/>
                  </MenuFlyoutItem.Icon>
              </ToggleMenuFlyoutItem>
              <MenuFlyoutSeparator></MenuFlyoutSeparator>
                <MenuFlyoutItem x:ConnectionId='18' Text="手动编辑角色 ID" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"                                >
                    <MenuFlyoutItem.Icon>
                        <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe70f;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
                <MenuFlyoutItem x:ConnectionId='19' Text="读取当前角色信息"                                           FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"                               >
                  <MenuFlyoutItem.Icon>
                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe72c;"/>
                  </MenuFlyoutItem.Icon>
              </MenuFlyoutItem>
                <MenuFlyoutItem x:ConnectionId='20' Text="复制角色 ID" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"                                >
                    <MenuFlyoutItem.Icon>
                        <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe8c8;"/>
                    </MenuFlyoutItem.Icon>
                </MenuFlyoutItem>
            </MenuFlyout>
          </SplitButton.Flyout>
        </SplitButton>
        
        <TeachingTip x:ConnectionId='15' x:Name="tipEditPlayerID"                                  Title="请输入角色 ID：" IsLightDismissEnabled="True" PreferredPlacement="Left" ActionButtonContent="确定" ActionButtonStyle="{StaticResource AccentButtonStyle}" CloseButtonContent="取消"                                                   >
            <TeachingTip.Content>
                <StackPanel Margin="0,10,0,0">
                    <TextBox x:ConnectionId='16' x:Name="tbEditPlayerID" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"></TextBox>
                </StackPanel>
            </TeachingTip.Content>
        </TeachingTip>
        <NavigationViewItemSeparator Margin="10,0" VerticalAlignment="Bottom"></NavigationViewItemSeparator>
      </Grid>

      <Grid Grid.Row="1">
        <Grid.ColumnDefinitions>
          <ColumnDefinition Width="*"></ColumnDefinition>
          <ColumnDefinition Width="2*"></ColumnDefinition>
        </Grid.ColumnDefinitions>
        <ComboBox x:ConnectionId='10' Grid.Column="0" Margin="10,10" Header="类别" Visibility="Visible" x:Name="SelectorTypes" PlaceholderText="选择类别" HorizontalAlignment="Stretch" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"                                                    >
          <ComboBox.ItemTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Path=DisplayName}"></TextBlock>
            </DataTemplate>
          </ComboBox.ItemTemplate>
        </ComboBox>
        <ComboBox x:ConnectionId='11' Grid.Column="1" Margin="10,10" Header="命令" IsEnabled="False" Visibility="Visible" x:Name="SelectorCommands" PlaceholderText="选择命令" HorizontalAlignment="Stretch" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono"                                                       >
          <ComboBox.ItemTemplate>
            <DataTemplate>
              <TextBlock Text="{Binding Path=DisplayName}"></TextBlock>
            </DataTemplate>
          </ComboBox.ItemTemplate>
        </ComboBox>
      </Grid>

      <Grid x:ConnectionId='3' x:Name="GridParams" Grid.Row="2">
      </Grid>
      <TextBlock x:ConnectionId='4' x:Name="TextBlockNoParams" Grid.Row="2" Text="（无参数）" VerticalAlignment="Center" HorizontalAlignment="Center" Foreground="{ThemeResource SystemControlPageTextBaseMediumBrush}" Margin="10"></TextBlock>

      <Grid Grid.Row="3">
        <TextBox x:ConnectionId='8' Header="编辑命令" x:Name="TextFinalCommand" Margin="10,10,150,10" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" IsSpellCheckEnabled="False" VerticalAlignment="Bottom"                                                                     />
        <Button x:ConnectionId='9' Content="发送" x:Name="BtnSend" IsEnabled="False" Width="120" Style="{StaticResource AccentButtonStyle}" Margin="10,10,10,10" VerticalAlignment="Bottom" HorizontalAlignment="Right"                        ></Button>
      </Grid>

      <Grid Grid.Row="4">
        <TextBlock Text="发送记录" Style="{StaticResource SubtitleTextBlockStyle}" VerticalAlignment="Top" HorizontalAlignment="Left" Margin="10,10"/>
        <Button x:ConnectionId='7' x:Name="BtnClearHistory" Content="清除" Margin="10,0" HorizontalAlignment="Right" VerticalAlignment="Center" Visibility="Collapsed"                                ></Button>
        <NavigationViewItemSeparator Margin="10,0" VerticalAlignment="Bottom"></NavigationViewItemSeparator>
      </Grid>

      <Grid Grid.Row="5">
        <ListView x:ConnectionId='5' x:Name="HistoryListView" Margin="10,10" CornerRadius="6" Padding="0,2" SelectionMode="Single" BorderThickness="1" BorderBrush="{ThemeResource SystemControlBackgroundBaseLowBrush}"                                                                                                                          >
            <ListView.ItemTemplate>
            <DataTemplate>
                <Grid MinHeight="48">
                    <TextBlock Text="cmd req >" VerticalAlignment="Top" TextWrapping="NoWrap" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" Margin="0,6,40,0"></TextBlock>
                    <TextBlock Text="{Binding Path=Command}" IsTextSelectionEnabled="True" VerticalAlignment="Top" HorizontalAlignment="Left" TextWrapping="Wrap" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" Margin="84,6,40,0"></TextBlock>
                    <TextBlock Text="cmd rsp >" VerticalAlignment="Top" TextWrapping="NoWrap" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" Margin="0,28,40,0"></TextBlock>
                    <TextBlock Text="{Binding Path=Result}" IsTextSelectionEnabled="True" VerticalAlignment="Top" HorizontalAlignment="Left" TextWrapping="Wrap" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" Margin="84,28,40,8"></TextBlock>
                  <Grid Margin="0" HorizontalAlignment="Right">
                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xf137;" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource SystemFillColorSuccess}" Visibility="{Binding Path=SuccessVisibility}"/>
                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xf137;" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource SystemFillColorCritical}" Visibility="{Binding Path=FailedVisibility}"/>
                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="{Binding Path=Icon}" FontSize="16" HorizontalAlignment="Center" VerticalAlignment="Center" Foreground="{StaticResource TextFillColorInverse}"/>
                  </Grid>
                </Grid>
            </DataTemplate>
          </ListView.ItemTemplate>
        </ListView>
      </Grid>
    </Grid>
  </Grid>
</Page>

