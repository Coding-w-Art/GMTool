<!-- Copyright (c) Microsoft Corporation and Contributors. -->
<!-- Licensed under the MIT License. -->

<Page x:ConnectionId='1'
    x:Class="GMTool.DiffViewer"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:GMTool"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    mc:Ignorable="d" NavigationCacheMode="Required">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="60"></RowDefinition>
            <RowDefinition Height="20"></RowDefinition>
            <RowDefinition Height="*"></RowDefinition>
            <RowDefinition Height="48"></RowDefinition>
        </Grid.RowDefinitions>
        <StackPanel Grid.Row="0" Spacing="8" Orientation="Horizontal">
            <ComboBox x:ConnectionId='12' Header="版本库" Margin="0,0,0,0" Width="560" x:Name="cbRepoUrl" IsEditable="False"                                     VerticalAlignment="Bottom" HorizontalAlignment="Stretch"                                                ></ComboBox>
            <AppBarSeparator VerticalAlignment="Bottom" Height="32" Margin="0,0"></AppBarSeparator>
            <TextBox x:ConnectionId='13' x:Name="tbRevFrom" Header="从版本" Text="" Width="100" VerticalAlignment="Bottom"></TextBox>
            <Button x:ConnectionId='14'                               VerticalAlignment="Bottom">
                <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" FontSize="16" Glyph="&#xe8fd;"/>
            </Button>
            <AppBarSeparator VerticalAlignment="Bottom" Height="32" Margin="0,0"></AppBarSeparator>
            <TextBox x:ConnectionId='15' x:Name="tbRevTo" Header="到版本" Text="" Width="100" VerticalAlignment="Bottom"></TextBox>
            <Button x:ConnectionId='16'                             VerticalAlignment="Bottom">
              <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" FontSize="16" Glyph="&#xe8fd;"/>
            </Button>
        </StackPanel>
        <StackPanel Grid.Row="0" HorizontalAlignment="Right" Orientation="Horizontal" Spacing="10" VerticalAlignment="Bottom">
            <Button x:ConnectionId='11' Width="120" Style="{StaticResource AccentButtonStyle}" Content="比较"                           ></Button>
        </StackPanel>

        <ListView x:ConnectionId='2' x:Name="lvChangeList"                                     Grid.Row="2" BorderThickness="1" CornerRadius="6" BorderBrush="{ThemeResource SystemControlBackgroundBaseLowBrush}" Padding="0,2" SelectionMode="Single" IsDoubleTapEnabled="True"                                            IsRightTapEnabled="True"                                         >
            <ListView.ItemTemplate>
              <DataTemplate>
                  <ListViewItem Tag="{Binding Path=Index}">
                      <ListViewItem.ContextFlyout>
                          <MenuFlyout>
                              <MenuFlyoutItem x:ConnectionId='6' Text="复制文件路径"                                 >
                                  <MenuFlyoutItem.Icon>
                                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe8c8;"></FontIcon>
                                  </MenuFlyoutItem.Icon>
                              </MenuFlyoutItem>
                              <MenuFlyoutSeparator></MenuFlyoutSeparator>
                              <MenuFlyoutItem x:ConnectionId='7' Text="比较差异..."                                 >
                                  <MenuFlyoutItem.Icon>
                                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xf57c;"></FontIcon>
                                  </MenuFlyoutItem.Icon>
                              </MenuFlyoutItem>
                              <MenuFlyoutItem x:ConnectionId='8' Text="追溯..."                                  >
                                  <MenuFlyoutItem.Icon>
                                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe779;"></FontIcon>
                                  </MenuFlyoutItem.Icon>
                              </MenuFlyoutItem>
                              <MenuFlyoutSeparator></MenuFlyoutSeparator>
                              <MenuFlyoutItem x:ConnectionId='9' Text="查看日志..." FontWeight="Bold"                                    >
                                  <MenuFlyoutItem.Icon>
                                      <FontIcon FontFamily="Assets/Segoe Fluent Icons.ttf#Segoe Fluent Icons" Glyph="&#xe8fd;"></FontIcon>
                                  </MenuFlyoutItem.Icon>
                              </MenuFlyoutItem>
                          </MenuFlyout>
                      </ListViewItem.ContextFlyout>
                      <Grid Height="40">
                      <Button Content="{Binding Path=ActionName}" Foreground="White" VerticalAlignment="Center" Width="36" Padding="0" Margin="0,2,0,0" Height="20" FontSize="12" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" IsHitTestVisible="False">
                          <Button.Background>
                              <SolidColorBrush Color="{Binding Path=ActionColor}"></SolidColorBrush>
                          </Button.Background>
                      </Button>
                      <TextBlock x:ConnectionId='10' Text="{Binding Path=FilePath}" Tag="{Binding Path=Index}" ToolTipService.ToolTip="{Binding Path=FilePath}" Margin="48,0,0,0" IsTextSelectionEnabled="True" VerticalAlignment="Center" TextTrimming="CharacterEllipsis" FontFamily="Assets/JetBrainsMono.ttf#JetBrains Mono" HorizontalAlignment="Left" IsDoubleTapEnabled="True"                                       ></TextBlock>
                      </Grid>
                  </ListViewItem>
              </DataTemplate>
          </ListView.ItemTemplate>
        </ListView>
        <StackPanel Grid.Row="3" Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right" VerticalAlignment="Bottom">
            <Button x:ConnectionId='3' Width="120" Content="清除"                            ></Button>
            <Button x:ConnectionId='4' Width="120" Content="保存"                             ></Button>
        </StackPanel>
    </Grid>
</Page>

